<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I say yes</title>

    <!--aqui ficam os scripts que devem ser inseridos para o leitor funcionar-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <style>
        /*aqui fica o css de personalização do botão*/
        #daiana
        {
            position: fixed;
            top: 40%;
            right: 0;
            margin-right: 20px;
            background-color:beige;
            border-radius: 10px;
        }

        #daiana :hover
        {
            opacity: 90%;
        }
    </style>

</head>
<body>
    <!-- ALERTAaAAAAAAAAAAAAAAAAAAAA -->
    <!-- ALERTAaAAAAAAAAAAAAAAAAAAAA -->
    <!--COLOCAR NO TOPO DO CÖDIGO-->
    <!-- vLibras -->
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
          <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>

    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>new window.VLibras.Widget('https://vlibras.gov.br/app');</script>
    <!--Fim Vlibras-->
    <!-- ALERTAaAAAAAAAAAAAAAAAAAAAA -->
    <!-- ALERTAaAAAAAAAAAAAAAAAAAAAA -->
    <!-- ALERTAaAAAAAAAAAAAAAAAAAAAA -->



    <!-- esse é o scipt que faz as coisas funcionarem -->
    <script>
        var toxic;// guarda o texto selecionado
    
        document.onselectionchange = function() //pega o conteudo dovselecionado pelo cursor
        {
        var selObj = window.getSelection();
        var selRange = selObj.toString();
        console.log(selRange);
        toxic=selRange;
        //document.querySelector('.selection').innerHTML = selRange;
        }
    
        const synth = window.speechSynthesis;
        function hereyes()
        {   if(toxic==undefined)//quando não tem nada selecionado ele exibe essa mensagem
            {
                toxic = "Nenhum texto foi selecionado, por favor selecione um texto para ser lido";
            }

            //seletor de vozes e configurações da voz
            let voices = synth.getVoices();
            if(voices.length !==0)
            {
                let msg= new SpeechSynthesisUtterance();

                msg.voice=voices[1];//conforme o index do vetor você pode selecionar a voz adequada, as padrões são 0(masculina)e 1(feminina)

                msg.rate=0.75;//velocidade de reprodução da mensagem

                msg.pitch=1.2;//frequencia da fala

                msg.text=toxic;//texto que será lido

                msg.lang= "pt-BR"//idioma da mensagem

                synth.speak(msg);//sintetiza o conteudo da mensegem em som

            }
        }
    </script>
    <div></div><!--texto para testes-->
      <p>Bom tarde a todos, este código lê o texto selecionado pelo mouse.</p>
    </div>
      
      <button id="daiana" onclick="hereyes()">#</button>
</body>
</html>